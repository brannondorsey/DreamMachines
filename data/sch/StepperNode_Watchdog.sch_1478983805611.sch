EESchema Schematic File Version 2
LIBS:rloopStepperNode-rescue
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:rloop
LIBS:rloopStepperNode-cache
EELAYER 25 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 7 15
Title "Watchdog"
Date ""
Rev "2"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text HLabel 8700 3900 2    60   Output ~ 0
STEP_DIR_CTRL
Text Notes 11900 10350 0    118  ~ 0
rLoop - Stepper Node\nMux Priority Watchdog System\n
Text Notes 11950 10500 0    60   ~ 0
Original Author: SafetyLok
Text HLabel 6100 4500 0    60   Input ~ 0
CHA_WDT_PULSE
Text HLabel 6100 5700 0    60   Input ~ 0
CHB_WDT_PULSE
Wire Wire Line
	7000 4500 8200 4500
Wire Wire Line
	8200 3900 8200 5050
Wire Wire Line
	8200 5050 8400 5050
Wire Wire Line
	8200 5700 8200 5250
Wire Wire Line
	8200 5250 8400 5250
Text Notes 6950 3910 2    60   ~ 0
During normal operation, both outputs\nare logic high.\nChannel A determines priority
Text Label 7500 4500 0    60   ~ 0
STEP_DIR_CTRL
Wire Wire Line
	9350 5150 10600 5150
Text HLabel 10600 5150 2    60   Output ~ 0
WDT_GOOD
Text Label 9850 5150 0    60   ~ 0
WDT_GOOD
Text Notes 10000 5600 0    60   ~ 0
Active High when either watchdog is good.\nThis signal then ensure the G210X enable circuits are kept closed except in\nthe case of a dual channel failure, where failsafe braking is required.
Text Notes 5750 6600 0    60   ~ 0
Todo:\nJumper Pin to simulate failures.
Wire Wire Line
	8700 3900 8200 3900
Connection ~ 8200 4500
$Comp
L 10K R10
U 1 1 575D4934
P 7400 5450
F 0 "R10" V 7480 5450 50  0000 C CNN
F 1 "10K" V 7400 5450 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 7330 5450 50  0001 C CNN
F 3 "" H 7400 5450 50  0000 C CNN
	1    7400 5450
	1    0    0    -1  
$EndComp
$Comp
L 10K R9
U 1 1 575D49D5
P 7350 4300
F 0 "R9" V 7430 4300 50  0000 C CNN
F 1 "10K" V 7350 4300 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 7280 4300 50  0001 C CNN
F 3 "" H 7350 4300 50  0000 C CNN
	1    7350 4300
	1    0    0    -1  
$EndComp
Text Notes 2250 8000 0    118  ~ 0
DESIGN REVIEW NOTES:\n1. STEP_DIR_CTRL should go low if channel A fails, giving channel B priority\n2. STEP_DIR_CTRL is pulled up, so the only way it can go low is if the TPS3813 is powered\n3. All devices here need redundant supplies\n4. Need to provide isolation in case of parasitic power from a failed node.
$Comp
L 74LVC1G32GW,125 U12
U 1 1 57655043
P 8600 4900
F 0 "U12" H 8600 5050 60  0000 C CNN
F 1 "74LVC1G32GW,125" H 9400 4250 60  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_SOT353" H 8500 4950 60  0001 C CNN
F 3 "" H 8600 4900 60  0000 C CNN
	1    8600 4900
	1    0    0    -1  
$EndComp
$Comp
L +3V3_A #PWR136
U 1 1 5765507A
P 8900 4700
F 0 "#PWR136" H 8900 4550 50  0001 C CNN
F 1 "+3V3_A" H 8900 4840 50  0000 C CNN
F 2 "" H 8900 4700 60  0000 C CNN
F 3 "" H 8900 4700 60  0000 C CNN
	1    8900 4700
	1    0    0    -1  
$EndComp
$Comp
L GNDD #PWR137
U 1 1 57655098
P 8900 5650
F 0 "#PWR137" H 8900 5400 50  0001 C CNN
F 1 "GNDD" H 8900 5500 50  0000 C CNN
F 2 "" H 8900 5650 50  0000 C CNN
F 3 "" H 8900 5650 50  0000 C CNN
	1    8900 5650
	1    0    0    -1  
$EndComp
$Comp
L GNDD #PWR128
U 1 1 576552AD
P 6100 4650
F 0 "#PWR128" H 6100 4400 50  0001 C CNN
F 1 "GNDD" H 6100 4500 50  0000 C CNN
F 2 "" H 6100 4650 50  0000 C CNN
F 3 "" H 6100 4650 50  0000 C CNN
	1    6100 4650
	0    1    1    0   
$EndComp
$Comp
L GNDD #PWR129
U 1 1 57655309
P 6100 5850
F 0 "#PWR129" H 6100 5600 50  0001 C CNN
F 1 "GNDD" H 6100 5700 50  0000 C CNN
F 2 "" H 6100 5850 50  0000 C CNN
F 3 "" H 6100 5850 50  0000 C CNN
	1    6100 5850
	0    1    1    0   
$EndComp
$Comp
L +3V3_A #PWR130
U 1 1 576553D8
P 7000 4800
F 0 "#PWR130" H 7000 4650 50  0001 C CNN
F 1 "+3V3_A" H 7000 4940 50  0000 C CNN
F 2 "" H 7000 4800 60  0000 C CNN
F 3 "" H 7000 4800 60  0000 C CNN
	1    7000 4800
	0    1    1    0   
$EndComp
$Comp
L +3V3_A #PWR134
U 1 1 576553E5
P 7350 4150
F 0 "#PWR134" H 7350 4000 50  0001 C CNN
F 1 "+3V3_A" H 7350 4290 50  0000 C CNN
F 2 "" H 7350 4150 60  0000 C CNN
F 3 "" H 7350 4150 60  0000 C CNN
	1    7350 4150
	1    0    0    -1  
$EndComp
$Comp
L TPS3813K33DBVT U10
U 1 1 57655FF2
P 6300 4400
F 0 "U10" H 6400 4450 50  0000 C CNN
F 1 "TPS3813K33DBVT" H 6950 3850 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_SOT236" H 6300 3900 50  0001 C CNN
F 3 "" H 6300 3900 50  0000 C CNN
	1    6300 4400
	1    0    0    -1  
$EndComp
$Comp
L TPS3813K33DBVT U11
U 1 1 57656065
P 6300 5600
F 0 "U11" H 6400 5650 50  0000 C CNN
F 1 "TPS3813K33DBVT" H 6950 5050 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_SOT236" H 6300 5100 50  0001 C CNN
F 3 "" H 6300 5100 50  0000 C CNN
	1    6300 5600
	1    0    0    -1  
$EndComp
Wire Wire Line
	7000 5700 8200 5700
$Comp
L +3V3_B #PWR135
U 1 1 5765612F
P 7400 5300
F 0 "#PWR135" H 7400 5150 50  0001 C CNN
F 1 "+3V3_B" H 7400 5440 50  0000 C CNN
F 2 "" H 7400 5300 60  0000 C CNN
F 3 "" H 7400 5300 60  0000 C CNN
	1    7400 5300
	1    0    0    -1  
$EndComp
$Comp
L 0R R7
U 1 1 57656BB3
P 7150 4650
F 0 "R7" V 7230 4650 50  0000 C CNN
F 1 "0R" V 7150 4650 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 7080 4650 50  0001 C CNN
F 3 "" H 7150 4650 50  0000 C CNN
	1    7150 4650
	0    1    1    0   
$EndComp
$Comp
L 0R R5
U 1 1 57656C84
P 5950 4800
F 0 "R5" V 6030 4800 50  0000 C CNN
F 1 "0R" V 5950 4800 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 5880 4800 50  0001 C CNN
F 3 "" H 5950 4800 50  0000 C CNN
	1    5950 4800
	0    1    1    0   
$EndComp
$Comp
L 0R R8
U 1 1 57656CCF
P 7150 5850
F 0 "R8" V 7230 5850 50  0000 C CNN
F 1 "0R" V 7150 5850 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 7080 5850 50  0001 C CNN
F 3 "" H 7150 5850 50  0000 C CNN
	1    7150 5850
	0    1    1    0   
$EndComp
$Comp
L 0R R6
U 1 1 57656D13
P 5950 6000
F 0 "R6" V 6030 6000 50  0000 C CNN
F 1 "0R" V 5950 6000 50  0000 C CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_R_0603" V 5880 6000 50  0001 C CNN
F 3 "" H 5950 6000 50  0000 C CNN
	1    5950 6000
	0    1    1    0   
$EndComp
$Comp
L GNDD #PWR133
U 1 1 57656D26
P 7300 5850
F 0 "#PWR133" H 7300 5600 50  0001 C CNN
F 1 "GNDD" H 7300 5700 50  0000 C CNN
F 2 "" H 7300 5850 50  0000 C CNN
F 3 "" H 7300 5850 50  0000 C CNN
	1    7300 5850
	0    -1   -1   0   
$EndComp
$Comp
L GNDD #PWR132
U 1 1 57656DA2
P 7300 4650
F 0 "#PWR132" H 7300 4400 50  0001 C CNN
F 1 "GNDD" H 7300 4500 50  0000 C CNN
F 2 "" H 7300 4650 50  0000 C CNN
F 3 "" H 7300 4650 50  0000 C CNN
	1    7300 4650
	0    -1   -1   0   
$EndComp
$Comp
L +3V3_A #PWR126
U 1 1 57656DB3
P 5800 4800
F 0 "#PWR126" H 5800 4650 50  0001 C CNN
F 1 "+3V3_A" H 5800 4940 50  0000 C CNN
F 2 "" H 5800 4800 60  0000 C CNN
F 3 "" H 5800 4800 60  0000 C CNN
	1    5800 4800
	0    -1   -1   0   
$EndComp
$Comp
L C_100nF_50V C52
U 1 1 575CF20D
P 4150 4950
F 0 "C52" H 4175 5050 50  0000 L CNN
F 1 "C_100nF_50V" H 4175 4850 50  0000 L CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_C_0603" H 4188 4800 50  0001 C CNN
F 3 "" H 4150 4950 50  0000 C CNN
	1    4150 4950
	1    0    0    -1  
$EndComp
$Comp
L +3V3_A #PWR122
U 1 1 575CF256
P 4150 4800
F 0 "#PWR122" H 4150 4650 50  0001 C CNN
F 1 "+3V3_A" H 4150 4940 50  0000 C CNN
F 2 "" H 4150 4800 60  0000 C CNN
F 3 "" H 4150 4800 60  0000 C CNN
	1    4150 4800
	1    0    0    -1  
$EndComp
$Comp
L GNDD #PWR123
U 1 1 575CF268
P 4150 5100
F 0 "#PWR123" H 4150 4850 50  0001 C CNN
F 1 "GNDD" H 4150 4950 50  0000 C CNN
F 2 "" H 4150 5100 50  0000 C CNN
F 3 "" H 4150 5100 50  0000 C CNN
	1    4150 5100
	1    0    0    -1  
$EndComp
$Comp
L C_100nF_50V C53
U 1 1 575CF2F4
P 4150 6050
F 0 "C53" H 4175 6150 50  0000 L CNN
F 1 "C_100nF_50V" H 4175 5950 50  0000 L CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_C_0603" H 4188 5900 50  0001 C CNN
F 3 "" H 4150 6050 50  0000 C CNN
	1    4150 6050
	1    0    0    -1  
$EndComp
$Comp
L GNDD #PWR125
U 1 1 575CF2FA
P 4150 6200
F 0 "#PWR125" H 4150 5950 50  0001 C CNN
F 1 "GNDD" H 4150 6050 50  0000 C CNN
F 2 "" H 4150 6200 50  0000 C CNN
F 3 "" H 4150 6200 50  0000 C CNN
	1    4150 6200
	1    0    0    -1  
$EndComp
$Comp
L +3V3_B #PWR124
U 1 1 575CF30D
P 4150 5900
F 0 "#PWR124" H 4150 5750 50  0001 C CNN
F 1 "+3V3_B" H 4150 6040 50  0000 C CNN
F 2 "" H 4150 5900 60  0000 C CNN
F 3 "" H 4150 5900 60  0000 C CNN
	1    4150 5900
	1    0    0    -1  
$EndComp
$Comp
L C_100nF_50V C54
U 1 1 575CF5E2
P 9500 6200
F 0 "C54" H 9525 6300 50  0000 L CNN
F 1 "C_100nF_50V" H 9525 6100 50  0000 L CNN
F 2 "RLOOP_FOOTPRINTS:rLoop_C_0603" H 9538 6050 50  0001 C CNN
F 3 "" H 9500 6200 50  0000 C CNN
	1    9500 6200
	1    0    0    -1  
$EndComp
$Comp
L +3V3_A #PWR138
U 1 1 575CF5E8
P 9500 6050
F 0 "#PWR138" H 9500 5900 50  0001 C CNN
F 1 "+3V3_A" H 9500 6190 50  0000 C CNN
F 2 "" H 9500 6050 60  0000 C CNN
F 3 "" H 9500 6050 60  0000 C CNN
	1    9500 6050
	1    0    0    -1  
$EndComp
$Comp
L GNDD #PWR139
U 1 1 575CF5EE
P 9500 6350
F 0 "#PWR139" H 9500 6100 50  0001 C CNN
F 1 "GNDD" H 9500 6200 50  0000 C CNN
F 2 "" H 9500 6350 50  0000 C CNN
F 3 "" H 9500 6350 50  0000 C CNN
	1    9500 6350
	1    0    0    -1  
$EndComp
Wire Wire Line
	7350 4450 7350 4500
Connection ~ 7350 4500
Wire Wire Line
	7400 5600 7400 5700
Connection ~ 7400 5700
$Comp
L +3V3_B #PWR?
U 1 1 57690A2A
P 5800 6000
F 0 "#PWR?" H 5800 5850 50  0001 C CNN
F 1 "+3V3_B" H 5800 6140 50  0000 C CNN
F 2 "" H 5800 6000 60  0000 C CNN
F 3 "" H 5800 6000 60  0000 C CNN
	1    5800 6000
	0    -1   -1   0   
$EndComp
$Comp
L +3V3_B #PWR?
U 1 1 57690B0A
P 7000 6000
F 0 "#PWR?" H 7000 5850 50  0001 C CNN
F 1 "+3V3_B" H 7000 6140 50  0000 C CNN
F 2 "" H 7000 6000 60  0000 C CNN
F 3 "" H 7000 6000 60  0000 C CNN
	1    7000 6000
	0    1    1    0   
$EndComp
$EndSCHEMATC
